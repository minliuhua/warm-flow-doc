import{u as U,i as te,j as le,k as W,l as ie,P as se,m as ae,n as ue,g as Q,p as x,q as re,s as M,v as l,x as oe,R as P,y as me,z as de,A as ne,C as ve,B as he,D as ge,h as ce,E as pe,G as Ee,H,I as ye,J as fe,K as Ae,L as O,M as T,N as Be}from"./app-NEH0cjHY.js";const be=["/","/common/companyintegration.html","/common/dromara.html","/common/getinvolved.html","/common/introduction.html","/common/joingroup.html","/common/learningmaterials.html","/common/member.html","/common/paidservice.html","/common/pr.html","/common/processdemo.html","/common/projectexample.html","/common/submitpr.html","/common/support.html","/common/troubleshooting.html","/common/update.html","/master/guide/api.html","/master/guide/collaboration.html","/master/guide/condition.html","/master/guide/condition_two_open.html","/master/guide/config.html","/master/guide/customstatus.html","/master/guide/datafillhandler.html","/master/guide/designerIntroduced.html","/master/guide/designer_two_open.html","/master/guide/expression_ex.html","/master/guide/flowchart.html","/master/guide/form.html","/master/guide/handler_change.html","/master/guide/jsonlib.html","/master/guide/listener.html","/master/guide/listener_two_open.html","/master/guide/logicdelete.html","/master/guide/ormusagetips.html","/master/guide/permission_handler.html","/master/guide/processterm.html","/master/guide/started.html","/master/guide/table.html","/master/guide/tenant.html","/master/guide/variable.html","/master/guide/variableStategy.html","/master/guide/variableStatey_two_open.html","/v1.2.10/guide/api.html","/v1.2.10/guide/config.html","/v1.2.10/guide/customstatus.html","/v1.2.10/guide/datafillhandler.html","/v1.2.10/guide/expression.html","/v1.2.10/guide/flowchart.html","/v1.2.10/guide/form.html","/v1.2.10/guide/jsonlib.html","/v1.2.10/guide/listener.html","/v1.2.10/guide/logicdelete.html","/v1.2.10/guide/ormusagetips.html","/v1.2.10/guide/processdemo.html","/v1.2.10/guide/processrule.html","/v1.2.10/guide/processterm.html","/v1.2.10/guide/started.html","/v1.2.10/guide/table.html","/v1.2.10/guide/tenant.html","/v1.2.10/guide/variable.html","/v1.2.10/guide/variableStategy.html","/v1.3.0/guide/api.html","/v1.3.0/guide/config.html","/v1.3.0/guide/customstatus.html","/v1.3.0/guide/datafillhandler.html","/v1.3.0/guide/designerIntroduced.html","/v1.3.0/guide/expression.html","/v1.3.0/guide/flowchart.html","/v1.3.0/guide/form.html","/v1.3.0/guide/jsonlib.html","/v1.3.0/guide/listener.html","/v1.3.0/guide/logicdelete.html","/v1.3.0/guide/ormusagetips.html","/v1.3.0/guide/processdemo.html","/v1.3.0/guide/processrule.html","/v1.3.0/guide/processterm.html","/v1.3.0/guide/started.html","/v1.3.0/guide/table.html","/v1.3.0/guide/tenant.html","/v1.3.0/guide/variable.html","/v1.3.0/guide/variableStategy.html","/v1.3.1/guide/api.html","/v1.3.1/guide/config.html","/v1.3.1/guide/customstatus.html","/v1.3.1/guide/datafillhandler.html","/v1.3.1/guide/designerIntroduced.html","/v1.3.1/guide/expression.html","/v1.3.1/guide/flowchart.html","/v1.3.1/guide/form.html","/v1.3.1/guide/jsonlib.html","/v1.3.1/guide/listener.html","/v1.3.1/guide/logicdelete.html","/v1.3.1/guide/ormusagetips.html","/v1.3.1/guide/processdemo.html","/v1.3.1/guide/processrule.html","/v1.3.1/guide/processterm.html","/v1.3.1/guide/started.html","/v1.3.1/guide/table.html","/v1.3.1/guide/tenant.html","/v1.3.1/guide/variable.html","/v1.3.1/guide/variableStategy.html","/v1.3.3/guide/api.html","/v1.3.3/guide/config.html","/v1.3.3/guide/customstatus.html","/v1.3.3/guide/datafillhandler.html","/v1.3.3/guide/designerIntroduced.html","/v1.3.3/guide/expression.html","/v1.3.3/guide/flowchart.html","/v1.3.3/guide/form.html","/v1.3.3/guide/jsonlib.html","/v1.3.3/guide/listener.html","/v1.3.3/guide/logicdelete.html","/v1.3.3/guide/ormusagetips.html","/v1.3.3/guide/processdemo.html","/v1.3.3/guide/processrule.html","/v1.3.3/guide/processterm.html","/v1.3.3/guide/started.html","/v1.3.3/guide/table.html","/v1.3.3/guide/tenant.html","/v1.3.3/guide/variable.html","/v1.3.3/guide/variableStategy.html","/v1.3.4/guide/api.html","/v1.3.4/guide/condition.html","/v1.3.4/guide/config.html","/v1.3.4/guide/customstatus.html","/v1.3.4/guide/datafillhandler.html","/v1.3.4/guide/designerIntroduced.html","/v1.3.4/guide/designer_two_open.html","/v1.3.4/guide/expression.html","/v1.3.4/guide/expression_ex.html","/v1.3.4/guide/flowchart.html","/v1.3.4/guide/form.html","/v1.3.4/guide/jsonlib.html","/v1.3.4/guide/listener.html","/v1.3.4/guide/logicdelete.html","/v1.3.4/guide/ormusagetips.html","/v1.3.4/guide/permission_handler.html","/v1.3.4/guide/processdemo.html","/v1.3.4/guide/processrule.html","/v1.3.4/guide/processterm.html","/v1.3.4/guide/started.html","/v1.3.4/guide/table.html","/v1.3.4/guide/tenant.html","/v1.3.4/guide/variable.html","/v1.3.4/guide/variableStategy.html","/master/guide/update/solon%E9%9B%86%E6%88%90Warm-Flow.html","/master/guide/update/Warm-Flow%E5%8F%91%E5%B8%831.3.4_%20%E6%94%AF%E6%8C%81solon%E5%92%8C%E4%BE%BF%E6%8D%B7%E6%80%A7%E6%8F%90%E5%8D%87.html","/v1.3.0/guide/update/%E4%B8%80%E4%B8%AA%E8%87%AA%E5%B8%A6%E6%B5%81%E7%A8%8B%E8%AE%BE%E8%AE%A1%E5%99%A8%E7%9A%84%E5%B7%A5%E4%BD%9C%E6%B5%81%E5%BC%95%E6%93%8E.html","/v1.3.1/guide/update/%E4%B8%80%E4%B8%AA%E8%87%AA%E5%B8%A6%E6%B5%81%E7%A8%8B%E8%AE%BE%E8%AE%A1%E5%99%A8%E7%9A%84%E5%B7%A5%E4%BD%9C%E6%B5%81%E5%BC%95%E6%93%8E.html","/v1.3.3/guide/update/%E4%B8%80%E4%B8%AA%E8%87%AA%E5%B8%A6%E6%B5%81%E7%A8%8B%E8%AE%BE%E8%AE%A1%E5%99%A8%E7%9A%84%E5%B7%A5%E4%BD%9C%E6%B5%81%E5%BC%95%E6%93%8E.html","/v1.3.4/guide/update/solon%E9%9B%86%E6%88%90Warm-Flow.html","/v1.3.4/guide/update/Warm-Flow%E5%8F%91%E5%B8%831.3.4_%20%E6%94%AF%E6%8C%81solon%E5%92%8C%E4%BE%BF%E6%8D%B7%E6%80%A7%E6%8F%90%E5%8D%87.html","/404.html","/common/","/master/guide/","/master/","/v1.2.10/guide/","/v1.2.10/","/v1.3.0/guide/","/v1.3.0/","/v1.3.1/guide/","/v1.3.1/","/v1.3.3/guide/","/v1.3.3/","/v1.3.4/guide/","/v1.3.4/","/master/guide/update/","/v1.3.0/guide/update/","/v1.3.1/guide/update/","/v1.3.3/guide/update/","/v1.3.4/guide/update/"],we="SEARCH_PRO_QUERY_HISTORY",E=U(we,[]),xe=()=>{const{queryHistoryCount:i}=H,s=i>0;return{enabled:s,queryHistory:E,addQueryHistory:a=>{s&&(E.value=Array.from(new Set([a,...E.value.slice(0,i-1)])))},removeQueryHistory:a=>{E.value=[...E.value.slice(0,a),...E.value.slice(a+1)]}}},q=i=>be[i.id]+("anchor"in i?`#${i.anchor}`:""),He="SEARCH_PRO_RESULT_HISTORY",{resultHistoryCount:$}=H,y=U(He,[]),Ce=()=>{const i=$>0;return{enabled:i,resultHistory:y,addResultHistory:s=>{if(i){const a={link:q(s),display:s.display};"header"in s&&(a.header=s.header),y.value=[a,...y.value.slice(0,$-1)]}},removeResultHistory:s=>{y.value=[...y.value.slice(0,s),...y.value.slice(s+1)]}}},Re=i=>{const s=ve(),a=W(),C=he(),r=Q(0),B=x(()=>r.value>0),g=ge([]);return ce(()=>{const{search:c,terminate:R}=pe(),f=Ee(d=>{const A=d.join(" "),{searchFilter:_=h=>h,splitWord:S,suggestionsFilter:j,...p}=s.value;A?(r.value+=1,c(d.join(" "),a.value,p).then(h=>_(h,A,a.value,C.value)).then(h=>{r.value-=1,g.value=h}).catch(h=>{console.warn(h),r.value-=1,r.value||(g.value=[])})):g.value=[]},H.searchDelay-H.suggestDelay);M([i,a],([d])=>f(d),{immediate:!0}),ye(()=>{R()})}),{isSearching:B,results:g}};var Se=te({name:"SearchResult",props:{queries:{type:Array,required:!0},isFocusing:Boolean},emits:["close","updateQuery"],setup(i,{emit:s}){const a=le(),C=W(),r=ie(se),{enabled:B,addQueryHistory:g,queryHistory:c,removeQueryHistory:R}=xe(),{enabled:f,resultHistory:d,addResultHistory:A,removeResultHistory:_}=Ce(),S=B||f,j=ae(i,"queries"),{results:p,isSearching:h}=Re(j),u=ue({isQuery:!0,index:0}),n=Q(0),v=Q(0),L=x(()=>S&&(c.value.length>0||d.value.length>0)),k=x(()=>p.value.length>0),F=x(()=>p.value[n.value]||null),Y=()=>{const{isQuery:e,index:t}=u;t===0?(u.isQuery=!e,u.index=e?d.value.length-1:c.value.length-1):u.index=t-1},z=()=>{const{isQuery:e,index:t}=u;t===(e?c.value.length-1:d.value.length-1)?(u.isQuery=!e,u.index=0):u.index=t+1},G=()=>{n.value=n.value>0?n.value-1:p.value.length-1,v.value=F.value.contents.length-1},J=()=>{n.value=n.value<p.value.length-1?n.value+1:0,v.value=0},K=()=>{v.value<F.value.contents.length-1?v.value+=1:J()},N=()=>{v.value>0?v.value-=1:G()},D=e=>e.map(t=>Be(t)?t:l(t[0],t[1])),V=e=>{if(e.type==="customField"){const t=fe[e.index]||"$content",[o,w=""]=Ae(t)?t[C.value].split("$content"):t.split("$content");return e.display.map(m=>l("div",D([o,...m,w])))}return e.display.map(t=>l("div",D(t)))},b=()=>{n.value=0,v.value=0,s("updateQuery",""),s("close")},X=()=>B?l("ul",{class:"search-pro-result-list"},l("li",{class:"search-pro-result-list-item"},[l("div",{class:"search-pro-result-title"},r.value.queryHistory),c.value.map((e,t)=>l("div",{class:["search-pro-result-item",{active:u.isQuery&&u.index===t}],onClick:()=>{s("updateQuery",e)}},[l(O,{class:"search-pro-result-type"}),l("div",{class:"search-pro-result-content"},e),l("button",{class:"search-pro-remove-icon",innerHTML:T,onClick:o=>{o.preventDefault(),o.stopPropagation(),R(t)}})]))])):null,Z=()=>f?l("ul",{class:"search-pro-result-list"},l("li",{class:"search-pro-result-list-item"},[l("div",{class:"search-pro-result-title"},r.value.resultHistory),d.value.map((e,t)=>l(P,{to:e.link,class:["search-pro-result-item",{active:!u.isQuery&&u.index===t}],onClick:()=>{b()}},()=>[l(O,{class:"search-pro-result-type"}),l("div",{class:"search-pro-result-content"},[e.header?l("div",{class:"content-header"},e.header):null,l("div",e.display.map(o=>D(o)).flat())]),l("button",{class:"search-pro-remove-icon",innerHTML:T,onClick:o=>{o.preventDefault(),o.stopPropagation(),_(t)}})]))])):null;return re("keydown",e=>{if(i.isFocusing){if(k.value){if(e.key==="ArrowUp")N();else if(e.key==="ArrowDown")K();else if(e.key==="Enter"){const t=F.value.contents[v.value];g(i.queries.join(" ")),A(t),a.push(q(t)),b()}}else if(f){if(e.key==="ArrowUp")Y();else if(e.key==="ArrowDown")z();else if(e.key==="Enter"){const{index:t}=u;u.isQuery?(s("updateQuery",c.value[t]),e.preventDefault()):(a.push(d.value[t].link),b())}}}}),M([n,v],()=>{var e;(e=document.querySelector(".search-pro-result-list-item.active .search-pro-result-item.active"))==null||e.scrollIntoView(!1)},{flush:"post"}),()=>l("div",{class:["search-pro-result-wrapper",{empty:i.queries.length?!k.value:!L.value}],id:"search-pro-results"},i.queries.length?h.value?l(oe,{hint:r.value.searching}):k.value?l("ul",{class:"search-pro-result-list"},p.value.map(({title:e,contents:t},o)=>{const w=n.value===o;return l("li",{class:["search-pro-result-list-item",{active:w}]},[l("div",{class:"search-pro-result-title"},e||r.value.defaultTitle),t.map((m,ee)=>{const I=w&&v.value===ee;return l(P,{to:q(m),class:["search-pro-result-item",{active:I,"aria-selected":I}],onClick:()=>{g(i.queries.join(" ")),A(m),b()}},()=>[m.type==="text"?null:l(m.type==="title"?me:m.type==="heading"?de:ne,{class:"search-pro-result-type"}),l("div",{class:"search-pro-result-content"},[m.type==="text"&&m.header?l("div",{class:"content-header"},m.header):null,l("div",V(m))])])})])})):r.value.emptyResult:S?L.value?[X(),Z()]:r.value.emptyHistory:r.value.emptyResult)}});export{Se as default};
